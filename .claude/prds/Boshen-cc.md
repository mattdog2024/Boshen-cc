---
name: Boshen-cc
description: 基于波神11线精确算法的桌面K线预测工具，支持文华行情软件的K线识别和预测线绘制
status: backlog
created: 2025-10-28T07:03:50Z
---

# PRD: Boshen-cc

## Executive Summary

Boshen-cc 是一款基于波神11线精确算法的桌面应用程序，专门为使用文华行情软件的股票、期货交易员设计。该工具通过屏幕识别技术，实现对文华行情软件中K线的精确识别，并在图表上绘制11条预测线，帮助交易员快速识别价格目标位。该软件采用极简设计理念，操作简单直观，无需数据接口，直接在现有行情软件基础上工作。

## Problem Statement

### 核心痛点
1. **技术分析效率低下**：交易员需要手动计算价格目标位，耗费大量时间
2. **工具切换成本高**：需要在多个软件之间切换，破坏分析思路的连贯性
3. **精度问题**：手动绘制预测线容易产生误差，影响交易决策
4. **学习曲线陡峭**：传统技术分析软件功能复杂，上手难度大

### 市场需求
- 量化交易和技术分析日益普及，对精确分析工具需求强烈
- 个人投资者需要低成本、高效率的分析工具
- 文华行情软件用户基数庞大，但缺乏专业的波神线分析工具

### 解决方案价值
- **一键操作**：点击K线即可生成11条精确预测线
- **无缝集成**：直接在现有行情软件上工作，无需切换
- **高精度算法**：基于逆向工程的波神精确算法，误差小于0.1%
- **零学习成本**：极简界面，新手也能立即使用

## User Stories

### 主要用户画像

**用户A：专业交易员**
- 背景：5年以上股票/期货交易经验，每天使用文华行情软件
- 需求：快速识别价格目标位，提高交易决策效率
- 痛点：手动计算耗时，容易出错

**用户B：技术分析爱好者**
- 背景：熟悉技术分析基础理论，正在学习波神理论
- 需求：直观理解波神11线在不同品种、不同周期的应用
- 痛点：缺乏实践工具，理论难以验证

**用户C：量化交易初学者**
- 背景：编程背景，刚进入量化交易领域
- 需求：简单易用的技术分析工具辅助学习
- 痛点：传统软件过于复杂，不知从何入手

### 核心用户故事

#### Epic 1: K线识别与预测线绘制
**作为交易员，我希望能够快速在K线图上标记预测目标位，这样我就能专注于交易决策而不是计算**

- **用户故事1.1**: 单体测量功能
  - **描述**: 点击"单体测量"按钮后，鼠标进入选取状态
  - **操作流程**:
    1. 点击菜单中的"单体测量"按钮
    2. 鼠标变为十字准星样式
    3. 将鼠标移动到文华行情软件的K线上
    4. 点击K线的最低点或最高点
    5. 系统自动识别该K线的最高价和最低价，并作为a线和b线
    6. 根据a线和b线的距离，在图表上绘制出包括a线和b线已经1线，2线，3线，4线，5线，6线，7线，8线，极线11条红色预测线，要红色的细线
    7. 显示每条线对应的具体价格数值，3线，6线，8线线体要稍微加粗一点点。
  - **验收标准**:
    - 点击后1秒内进入选取状态
    - 能够准确识别K线边界（误差不超过2像素）
    - 11条线完全符合波神算法公式
    - 线条清晰可见，颜色为标准红色，3线，6线，8线线体要稍微加粗一点点

- **用户故事1.2**: 影线测量功能
  - **描述**: 针对K线影线进行专门测量，适用于特殊行情分析
  - **操作流程**:
    1. 点击"影线测量"按钮
    2. 鼠标进入选取状态
    3. 点击K线的影线部分
    4. 系统基于影线长度计算预测线
  - **验收标准**:
    - 能够区分实体和影线
    - 算法针对影线有专门优化

- **用户故事1.3**: 预测线管理
  - **描述**: 对已绘制的预测线进行管理和控制
  - **功能特性**:
    - 预测线自动吸附到K线位置
    - 图表缩放时线条位置保持正确
    - 提供"清除所有线"按钮
    - 支持单独删除某条预测线
    - 线条半透明显示，不影响K线观察
  - **验收标准**:
    - 图表缩放比例从50%到200%之间，线条位置误差不超过1像素
    - 清除操作响应时间不超过0.5秒

#### Epic 2: 多周期行情分析（Phase 2）
**作为交易员，我希望能够快速查看不同时间周期的波神线分析结果，这样我就能做出更全面的交易决策**

- **用户故事2.1**: 自动周期切换
  - **描述**: 软件自动切换到不同时间周期进行分析
  - **功能特性**:
    - 支持日线、1小时、15分钟、5分钟周期
    - 自动识别当前周期并切换
    - 切换过程中保持界面焦点
  - **验收标准**:
    - 周期切换成功率98%以上
    - 单次切换时间不超过2秒

- **用户故事2.2**: 行情状态分析表格
  - **描述**: 以表格形式展示各周期的波神线分析结果
  - **表格内容**:
    - 时间周期（日线、1小时、15分钟、5分钟）
    - 当前价格位置
    - 距离下一根线的空间
    - 当前所处线位（如：正在接近3线）
    - 涨跌趋势判断
    - 建议操作（谨慎看多/看空等）
  - **验收标准**:
    - 数据刷新延迟不超过1秒
    - 分析结果与波神理论一致性95%以上

## Requirements

### 功能需求

#### 核心功能
1. **K线识别引擎**
   - 基于图像识别技术，准确识别文华行情软件中的K线
   - 支持不同颜色和样式的K线（红K线、绿K线、十字星等）
   - 能够区分K线实体和影线部分
   - 识别准确率达到99%以上

2. **波神11线算法实现**
   - 精确实现波神11线比例算法
   - 支持11个标准比例：0.0, 1.0, 1.849, 2.397, 3.137, 3.401, 4.000, 4.726, 5.247, 6.027, 6.808
   - 计算精度到小数点后2位
   - 支持向上预测（所有线在B点之上）

3. **预测线绘制系统**
   - 在文华行情软件窗口上叠加绘制预测线
   - 线条样式：红色、细线、半透明
   - 每条线旁边显示对应价格标签
   - 支持动态更新和清除

4. **用户交互界面**
   - 简洁的主界面，仅包含必要功能按钮
   - 鼠标悬停提示和状态指示
   - 键盘快捷键支持（ESC退出选取状态）

#### 辅助功能
1. **设置管理**
   - 线条颜色和粗细调整
   - 价格标签显示格式设置
   - 透明度调节

2. **历史记录**
   - 保存最近100次测量记录
   - 支持快速恢复历史测量结果

### 非功能需求

#### 性能要求
- **响应时间**: K线识别到绘制完成不超过2秒
- **CPU占用**: 空闲状态不超过5%，工作状态不超过15%
- **内存占用**: 不超过100MB
- **兼容性**: 支持Windows 7/8/10/11 64位系统

#### 可靠性要求
- **稳定性**: 连续运行24小时无崩溃
- **识别准确率**: K线识别准确率≥99%
- **算法精度**: 预测线计算与原版软件误差≤0.1%

#### 安全性要求
- **隐私保护**: 不收集用户任何交易数据
- **系统安全**: 仅访问必要的系统API
- **权限控制**: 最小权限原则

#### 易用性要求
- **学习成本**: 新用户在5分钟内掌握基本操作
- **操作效率**: 完成一次完整测量不超过10秒
- **错误处理**: 提供清晰的错误提示和恢复机制

#### 兼容性要求
- **软件兼容**: 支持文华行情软件所有版本
- **分辨率支持**: 1920×1080到4K分辨率
- **多显示器**: 支持多显示器环境

## Success Criteria

### 技术指标
- **识别准确率**: K线自动识别准确率≥99%
- **算法精度**: 预测线计算与原版软件误差≤0.1%
- **性能指标**: 单次测量完成时间≤2秒
- **稳定性**: 7×24小时连续运行无崩溃

### 业务指标
- **用户满意度**: 用户满意度评分≥4.5/5.0
- **使用效率**: 相比手动计算效率提升≥80%
- **学习成本**: 新用户上手时间≤10分钟

### 质量指标
- **缺陷密度**: ≤0.5个缺陷/千行代码
- **代码覆盖率**: ≥80%
- **文档完整性**: 100%核心功能有对应文档

## Constraints & Assumptions

### 技术约束
- **开发平台**: Windows桌面应用（暂不考虑跨平台）
- **开发语言**: C# 或 C++（考虑屏幕捕获和图像处理性能）
- **依赖库**: OpenCV（图像识别）、Windows API（屏幕操作）
- **部署方式**: 单文件可执行程序，绿色免安装

### 时间约束
- **MVP版本**: 开发周期4周
- **完整版本**: 开发周期8周
- **维护周期**: 长期维护和优化

### 资源约束
- **开发团队**: 1-2名开发人员
- **预算限制**: 开发成本控制在合理范围内
- **硬件要求**: 用户硬件配置不低于主流水平

### 法律合规约束
- **知识产权**: 确保波神算法实现不涉及专利侵权
- **软件许可**: 遵循开源软件许可协议
- **数据安全**: 不涉及用户敏感数据处理

### 假设条件
- **用户环境**: 用户已安装文华行情软件
- **系统权限**: 用户具有管理员权限安装软件
- **网络环境**: 软件运行不需要网络连接
- **使用场景**: 主要用于个人交易分析，非商业用途

## Out of Scope

### Phase 1 不包含的功能
1. **实时行情数据接口**
   - 不直接连接交易所数据源
   - 不处理实时数据流
   - 不提供行情推送服务

2. **高级技术指标**
   - 除波神11线外的其他技术指标
   - 自定义指标开发功能
   - 指标组合分析

3. **交易功能**
   - 不直接连接交易接口
   - 不提供下单交易功能
   - 不处理账户和持仓信息

4. **云端功能**
   - 不提供云存储服务
   - 不支持多设备同步
   - 不涉及用户数据云备份

5. **高级分析功能**
   - 不包含回测系统
   - 不提供策略优化功能
   - 不涉及风险管理模块

### 永远不考虑的功能
1. **投资建议功能**
   - 不提供具体的买卖建议
   - 不进行收益预测
   - 不承担投资风险

2. **社交功能**
   - 不包含社区交流功能
   - 不支持用户间数据分享
   - 不提供分析师评论

## Dependencies

### 外部依赖
1. **文华行情软件**
   - 需要用户预先安装并正常运行
   - 依赖软件的界面布局保持相对稳定
   - 需要适应软件版本更新

2. **操作系统**
   - Windows 7 SP1及以上版本
   - .NET Framework 4.6.2或更高版本（如使用C#）
   - Visual C++ Redistributable（如使用C++）

3. **第三方库**
   - OpenCV 4.x（图像处理）
   - Windows API（系统调用）
   - 可能需要的屏幕捕获库

### 内部依赖
1. **算法实现**
   - 依赖波神11线精确算法文档
   - 需要持续验证算法准确性
   - 可能需要根据实际情况微调

2. **测试数据**
   - 需要大量真实K线数据进行测试
   - 依赖文华行情软件的历史数据
   - 需要建立回归测试用例库

### 团队依赖
1. **开发技能**
   - 桌面应用开发经验
   - 图像识别和计算机视觉
   - Windows API编程
   - 金融技术分析知识

2. **测试资源**
   - 不同配置的测试机器
   - 各版本文华行情软件
   - 各种类型的K线数据样本

### 时间依赖
1. **市场调研**
   - 需要了解用户具体使用习惯
   - 收集竞品分析数据
   - 调研文华行情软件用户群体

2. **算法验证**
   - 需要充足时间验证算法准确性
   - 收集用户反馈进行优化
   - 建立完整的测试体系

---

*本PRD将根据开发进展和用户反馈持续更新和完善*